<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Media Nexus</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet">
  <style>
    :root {
      --space-gradient: linear-gradient(45deg, #0b0b2d, #1a1a4a, #2d0b2d);
      --node-glow: radial-gradient(circle at center, #4a90e255, transparent 70%);
      --cyber-blue: #00f3ff;
    }

    body {
      margin: 0;
      background: var(--space-gradient);
      font-family: 'Segoe UI', system-ui, sans-serif;
      color: white;
      overflow-x: hidden;
    }

    #connections-graph-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: radial-gradient(circle at 50% 50%, #ffffff08 0%, #000000 100%);
    }

    #connections-graph {
      height: 100%;
      width: 100%;
    }

    .controls {
      position: fixed;
      top: 20px;
      left: 20px;
      z-index: 1000;
      display: flex;
      gap: 10px;
      background: #ffffff0d;
      padding: 15px;
      border-radius: 10px;
      backdrop-filter: blur(10px);
      border: 1px solid #ffffff1a;
    }

    .cyber-button {
      background: linear-gradient(145deg, #0b0b2d, #2d0b2d);
      color: var(--cyber-blue);
      padding: 12px 24px;
      border: 1px solid var(--cyber-blue);
      border-radius: 6px;
      font-family: 'Courier New', monospace;
      cursor: pointer;
      transition: all 0.3s ease;
      text-shadow: 0 0 8px var(--cyber-blue);
      box-shadow: 0 0 15px #00f3ff33;
    }

    .cyber-button:hover {
      background: linear-gradient(145deg, #2d0b2d, #0b0b2d);
      transform: scale(1.05);
      box-shadow: 0 0 25px #00f3ff66;
    }

    #video-modal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80%;
      height: 80%;
      background: radial-gradient(circle at center, #1a1a4a, #0b0b2d);
      border-radius: 20px;
      border: 2px solid var(--cyber-blue);
      box-shadow: 0 0 50px #00f3ff33;
      overflow: hidden;
    }

    .modal-content {
      position: relative;
      height: 100%;
      padding: 40px;
      backdrop-filter: blur(20px);
    }

    #close-modal {
      position: absolute;
      top: 15px;
      right: 15px;
      background: transparent;
      border: none;
      color: var(--cyber-blue);
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }

    #close-modal:hover {
      transform: rotate(90deg);
    }

    .node-tooltip {
      background: #000000dd !important;
      border: 1px solid var(--cyber-blue) !important;
      border-radius: 8px !important;
      backdrop-filter: blur(10px) !important;
      box-shadow: 0 0 20px #00f3ff33 !important;
    }

    .vis-tooltip {
      max-width: 400px !important;
      pointer-events: auto !important;
    }

    .particles {
      position: fixed;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    @keyframes particle-flow {
      from { transform: translateY(-100%) rotate(0deg); }
      to { transform: translateY(100vh) rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="connections-graph-container">
    <div class="controls">
      <button class="cyber-button" id="toggle-physics">TOGGLE DYNAMICS</button>
      <button class="cyber-button" id="reset-layout">RESET NEXUS</button>
      <button class="cyber-button" id="auto-rotate">AUTO ORBIT</button>
      <input type="text" class="cyber-button" id="search" placeholder="SEARCH NODES...">
    </div>
    <div id="connections-graph"></div>
    <div class="particles"></div>
  </div>

  <div id="video-modal">
    <div class="modal-content">
      <button id="close-modal">✕</button>
      <iframe id="modal-video" width="100%" height="90%" frameborder="0" allowfullscreen></iframe>
      <div id="video-playlist"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const items = [
 
  { "id": 1, "title": "Summerhill Dawn", "tags": ["Forget Me Nots", "video"], "videoUrl": "https://www.youtube.com/embed/NgAvUmezuC8" },
  { "id": 2, "title": "Trouble", "tags": ["Forget Me Nots", "video"], "videoUrl": "https://www.youtube.com/embed/LqgQawC0qCc" },
  { "id": 3, "title": "Beautiful Goodbye", "tags": ["Cilla Black", "RTE's Late Late Show", "video"], "videoUrl": "https://www.youtube.com/embed/I1WocWuNLVg" },
  { "id": 4, "title": "Single", "tags": ["Natasha Bedingfield", "RTE's Late Late Show", "video"], "videoUrl": "https://www.youtube.com/embed/3kXZc_isrBA" },
  { "id": 5, "title": "It's Nice to Be Nice", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/ap7Bklv8pB0" },
  { "id": 6, "title": "Shaman (Meditation)", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/lz2hy0v5nBU" },
  { "id": 7, "title": "RTE's Late Late Show - Natasha Bedingfield - Single", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/3kXZc_isrBA" },
  { "id": 8, "title": "Smile", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/UNhLjsRurVc" },
  { "id": 9, "title": "There Are More Things", "tags": ["LiR", "video"], "videoUrl": "https://www.youtube.com/embed/7D51TGvo1jg" },
  { "id": 10, "title": "Muff Winwood took a trip and missed Woodstock", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/hfHnSofFpEI" },
  { "id": 11, "title": "Traveller", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/4Fl4AVab8MI" },
  { "id": 12, "title": "Traveller - Fan clip (2020)", "tags": ["LiR", "video"], "videoUrl": "https://www.youtube.com/embed/kpV02nfOqKU" },
  { "id": 13, "title": "Reverb: The Golden Horde profile on RTÉ", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/_PmMbWVzYK8" },
  { "id": 14, "title": "Prayer Before A Voyage (The Late Late Show)", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/BnDU3f4HxC8" },
  { "id": 15, "title": "Great Motivator", "tags": ["Igloo", "video"], "videoUrl": "https://www.youtube.com/embed/z5hDWKEqz_I" },
  { "id": 16, "title": "Falling At Your Feet (The Late Late Show) (2003)", "tags": ["U2", "video"], "videoUrl": "https://www.youtube.com/embed/m6auWD_U2bM" },
  { "id": 17, "title": "All Your Life", "tags": ["Bickley / O'Farrell", "video"], "videoUrl": "https://www.youtube.com/embed/t2KyyySk9Wg" },
  { "id": 18, "title": "Friends in Time", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/Emf_gmtMVZk" },
  { "id": 19, "title": "100 Boys", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/xmTPb18DubE" },
  { "id": 20, "title": "Endless Weekend", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/fKh0SA7iHCk" },
  { "id": 21, "title": "ETI (w/ live footage)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/c6KKVxqKzTU" },
  { "id": 22, "title": "Black Blade (live)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/Z-IlxQ6_Yj8" },
  { "id": 23, "title": "Down Down Down (live)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/2bZexBarD1o" },
  { "id": 24, "title": "Friends in Time", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/ZzCWjXomrhc" },
  { "id": 25, "title": "Book of Everlasting Things (unreleased demo)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/0_Fuiv9HohU" },
  { "id": 26, "title": "Rorschach (demo version)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/CjKrJ0oqDpQ" },
  { "id": 27, "title": "Solar System (live, bootleg)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/h3x_5VZ78jo" },
  { "id": 28, "title": "Louie, Louie/Hang On Sloopy: Johnny Thunders with The Golden Horde", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/mmZBy-R8g48" },
  { "id": 29, "title": "Something Beautiful (unreleased, demo)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/H0NVypxGVjw" },
  { "id": 30, "title": "Blitzkrieg Bop - Joey Ramone & the Resistance (live)", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/6T11-Oip3Gw" },
  { "id": 31, "title": "Hopes of a Dream (unreleased, demo)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/x2_rsoGuUZQ" },
  { "id": 32, "title": "Cigarettes & Sunshine (unreleased, demo)", "tags": ["The Golden Horde", "video"], "videoUrl": "https://www.youtube.com/embed/EpwmsQnryL8" },
  { "id": 33, "title": "Niemali", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/7IRvFxznRw4" },
  { "id": 34, "title": "Killer Species", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/NOiYOwFcYUs" },
  { "id": 35, "title": "Shunk", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/uUJf1wXkEEQ" },
  { "id": 36, "title": "Spinning World", "tags": ["AVAN ATTAK", "video"], "videoUrl": "https://www.youtube.com/embed/thJC6FGYCzQ" },
  { "id": 37, "title": "Die Nebula", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/vylMvInak2k" },
  { "id": 38, "title": "Track With No Name", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/Qv1usZdAgKI" },
  { "id": 39, "title": "Kaos Split", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/Lv76RvHm_hk" },
  { "id": 40, "title": "Gold (from movie Once)", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/LLNhmjtOcC0" },
  { "id": 41, "title": "I Was Looking For Someone", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/_kn_N6Nxnh8" },
  { "id": 42, "title": "Love Song", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/qhqbc_YumSM" },
  { "id": 43, "title": "LIVE IN WHELANS 1990 [Full Gig]", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/Om0cT-5015U" },
  { "id": 44, "title": "#OnceCastEP: 'Gold' (London Cast of Once)", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/71eLTe3tmow" },
  { "id": 45, "title": "Gold; Cork Opera House, Cork 02.02.17", "tags": ["Interference", "video"], "videoUrl": "https://www.youtube.com/embed/eAuf_e3b-HY" },
  { "id": 46, "title": "Wild Cat Strutting Thing - Mundy (Interference)", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/v3nv1xboimg" },
  { "id": 47, "title": "Wild Cat Strutting Thing (feat. Fergus O'Farrell & James O'Leary)", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/pDlpRG2JSgI" },
  { "id": 48, "title": "Vinegar Girl (feat. Fergus O'Farrell & James O'Leary)", "tags": ["video"], "videoUrl": "https://www.youtube.com/embed/LRF_aaiRQsA" },
  { "id": 49, "title": "No Reason (Official Music Video)", "tags": ["The Glee Club", "video"], "videoUrl": "https://www.youtube.com/embed/76sg_MzvIsw" },
  { "id": 50, "title": "The Blame", "tags": ["The Glee Club", "video"], "videoUrl": "https://www.youtube.com/embed/kXGTHDK8kpw" },
  { "id": 51, "title": "Main Work", "tags": ["RTE's Late Late Show", "Sony Music", "Warner Bros", "4AD", "Satanta Records", "Performing", "Recording", "Touring"] },
  { "id": 52, "title": "Rod Stewart", "tags": ["Drums", "TV"] },
  { "id": 53, "title": "Paul Young", "tags": ["Drums", "TV"] },
  { "id": 54, "title": "Kirsty MacColl", "tags": ["Artist"] },
  { "id": 55, "title": "Katie Melua", "tags": ["Artist", "TV"] },
  { "id": 56, "title": "The 4 Of Us", "tags": ["Drums", "Live", "Recording", "TV"] },
  { "id": 57, "title": "Gavin Friday", "tags": ["Artist"] },
  { "id": 58, "title": "Interference", "tags": ["Drums"] },
  { "id": 59, "title": "Grand Slam", "tags": ["Drums"] },
  { "id": 60, "title": "Mik Pyro", "tags": ["Artist"] },
  { "id": 61, "title": "The Dublin Blues Cartel", "tags": ["Drums"] },
  { "id": 62, "title": "The Golden Horde", "tags": ["Drums"] },
  { "id": 63, "title": "The Forget-Me-Nots", "tags": ["Drums", "TV", "Live"] },
  { "id": 64, "title": "Lir", "tags": ["Drums", "Live", "Recording", "TV", "BBC"] },
  { "id": 65, "title": "Mitch Easter", "tags": ["Producer", "REM", "Suzanne Vega", "Wilco"] },
  { "id": 66, "title": "Bungalow", "tags": ["Drums"] },
  { "id": 67, "title": "The Glee Club", "tags": ["Drums"] },
  { "id": 68, "title": "Mundy", "tags": ["Artist"] },
  { "id": 69, "title": "Glen Hansard", "tags": ["Artist"] },
  { "id": 70, "title": "Eamonn Dowd", "tags": ["Artist"] },
  { "id": 71, "title": "The Racketeers", "tags": ["Drums"] },
  { "id": 72, "title": "Darling Sugar Honey", "tags": ["Drums"] },
  { "id": 73, "title": "Hank Half Head", "tags": ["Drums", "Live", "Recording"] },
  { "id": 74, "title": "Alice Springs", "tags": ["Drums"] },
  { "id": 75, "title": "Tryst", "tags": ["Artist"] },
  { "id": 76, "title": "Donal Byrne", "tags": ["Artist"] },
  { "id": 77, "title": "John Murphy", "tags": ["Artist"] },
  { "id": 78, "title": "Hugh Doolin", "tags": ["Artist"] },
  { "id": 79, "title": "Sean O'Connor", "tags": ["Artist"] },
  { "id": 80, "title": "Pat Farrell", "tags": ["Artist"] },
  { "id": 81, "title": "John Quearney", "tags": ["Artist"] },
  { "id": 82, "title": "Thomas Walsh", "tags": ["Artist", "Ivo Novello Winner"] },
  { "id": 83, "title": "Robbie Malone", "tags": ["Artist", "David Gray"] },
  { "id": 84, "title": "Pete Wingfield", "tags": ["Producer", "Paul McCartney", "Everly Bros", "Van Morrison"] },
  { "id": 85, "title": "Pete Smith", "tags": ["Producer", "Sting", "The Police", "Duran Duran"] },
      ];

   // Enhanced node styling
      const groups = {
        item: {
          color: {
            background: '#4a90e2',
            border: '#357abd',
            highlight: { background: '#6aa8ff', border: '#4a90e2' }
          },
          shape: 'hexagon',
          font: { color: '#ffffff', size: 14 },
          borderWidth: 2,
          shadow: true
        },
        tag: {
          color: {
            background: '#e24a4a',
            border: '#bd3535',
            highlight: { background: '#ff6a6a', border: '#e24a4a' }
          },
          shape: 'triangle',
          font: { color: '#ffffff', size: 16 },
          borderWidth: 2,
          shadow: true
        }
      };

      // Create network
      const nodes = new vis.DataSet();
      const edges = new vis.DataSet();
      
      // Add nodes and edges with enhanced relationships
      items.forEach(item => {
        nodes.add({
          id: item.id,
          label: item.title,
          group: 'item',
          videoUrl: item.videoUrl,
          shapeProperties: { interpolation: false },
          physics: true
        });

        item.tags.forEach(tag => {
          if (!nodes.get(tag)) {
            nodes.add({
              id: tag,
              label: tag,
              group: 'tag',
              value: 5,
              physics: true
            });
          }
          edges.add({
            from: item.id,
            to: tag,
            color: {
              color: `hsl(${Math.random() * 360}, 70%, 50%)`,
              highlight: '#ffffff'
            },
            width: 2,
            smooth: { type: 'curvedCW', roundness: 0.3 }
          });
        });
      });

      // Network configuration
      const options = {
        nodes: {
          scaling: { min: 10, max: 30 },
          shapeProperties: { useBorderWithImage: true },
          shadow: {
            enabled: true,
            color: 'rgba(0,243,255,0.5)',
            size: 15,
            x: 0,
            y: 0
          }
        },
        edges: {
          arrows: { to: { enabled: true, scaleFactor: 0.5 } },
          selectionWidth: 3,
          hoverWidth: 2.5
        },
        physics: {
          enabled: true,
          forceAtlas2Based: {
            gravitationalConstant: -100,
            centralGravity: 0.01,
            springLength: 200,
            springConstant: 0.05
          },
          stabilization: { iterations: 100 }
        },
        interaction: {
          hover: true,
          tooltipDelay: 200,
          keyboard: { enabled: true, speed: { x: 10, y: 10, zoom: 0.1 } }
        },
        groups: groups
      };

      const container = document.getElementById('connections-graph');
      const network = new vis.Network(container, { nodes, edges }, options);

      // New Features
      let rotationInterval;
      
      // Auto-rotate
      document.getElementById('auto-rotate').addEventListener('click', () => {
        if (!rotationInterval) {
          rotationInterval = setInterval(() => {
            network.moveTo({
              position: network.getViewPosition(),
              scale: network.getScale(),
              animation: { duration: 10000, easingFunction: 'linear' }
            });
          }, 100);
        } else {
          clearInterval(rotationInterval);
          rotationInterval = null;
        }
      });

      // Search functionality
      document.getElementById('search').addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        nodes.forEach(node => {
          const match = node.label.toLowerCase().includes(query);
          nodes.update({ id: node.id, hidden: !match });
        });
      });

      // Enhanced node click handling
      network.on('click', (params) => {
        if (params.nodes.length) {
          const nodeId = params.nodes[0];
          const node = nodes.get(nodeId);
          if (node.videoUrl) {
            document.getElementById('video-modal').style.display = 'block';
            document.getElementById('modal-video').src = node.videoUrl;
          }
          // Highlight connected nodes
          network.selectNodes([nodeId]);
          const connectedEdges = network.getConnectedEdges(nodeId);
          network.clusterOutliers({
            joinCondition: (edge) => !connectedEdges.includes(edge.id)
          });
        }
      });

      // Particle effect
      function createParticles() {
        const particles = document.querySelector('.particles');
        for (let i = 0; i < 50; i++) {
          const particle = document.createElement('div');
          particle.style.cssText = `
            position: absolute;
            width: 2px;
            height: 2px;
            background: #00f3ff;
            border-radius: 50%;
            animation: particle-flow ${Math.random() * 10 + 5}s linear infinite;
            left: ${Math.random() * 100}%;
            opacity: ${Math.random() * 0.5};
          `;
          particles.appendChild(particle);
        }
      }
      createParticles();

      function applyCircularLayout() {
        const positions = {};
        const nodeCount = nodes.length;
        const radius = 300;
        const angle = (2 * Math.PI) / nodeCount;
        const yOffset = -100; // Add an offset to raise the mandala
        
        let i = 0;
        nodes.forEach((node) => {
          positions[node.id] = {
            x: radius * Math.cos(angle * i),
            y: radius * Math.sin(angle * i)
          };
          i++;
        });
        
        network.setOptions({ physics: { enabled: false } });
        network.moveTo({ scale: 0.3 });
        network.body.data.nodes.update(
          nodes.map(node => ({
            id: node.id,
            x: positions[node.id].x,
            y: positions[node.id].y
          }))
        );
      }

      network.moveTo({
        position: { x: 0, y: 0 },
        scale: 0.3,
        animation: { duration: 1000, easingFunction: 'easeInOutQuad' }
      });

      // Initial layout
      applyCircularLayout();

      const toggleButton = document.querySelector(".toggle-physics-button");
      let isPhysicsEnabled = false;

      toggleButton.addEventListener("click", function() {
        isPhysicsEnabled = !isPhysicsEnabled;
        if (isPhysicsEnabled) {
          network.setOptions({ physics: { enabled: true } });
        } else {
          applyCircularLayout();
        }
      });

      // Open video in modal on node click
      network.on("click", function (params) {
        const clickedNode = params.nodes[0];
        const item = items.find(i => i.id === clickedNode);
        if (item && item.videoUrl) {
          // Show the modal and embed the video
          document.getElementById("video-modal").style.display = "block";
          document.getElementById("modal-video").src = item.videoUrl;
        }
      });

      // Close the modal when the close button is clicked
      document.getElementById("close-modal").addEventListener("click", function() {
        document.getElementById("video-modal").style.display = "none";
        document.getElementById("modal-video").src = "";  // Stop the video
      });
    });
  </script>
</body>
</html>
